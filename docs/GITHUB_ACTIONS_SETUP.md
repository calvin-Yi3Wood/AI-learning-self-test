# ğŸš€ GitHub Actionsæ•°æ®æ”¶é›†ç³»ç»Ÿéƒ¨ç½²æŒ‡å—

## ğŸ“‹ ç›®å½•
- [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
- [å‰ç½®å‡†å¤‡](#å‰ç½®å‡†å¤‡)
- [éƒ¨ç½²æ­¥éª¤](#éƒ¨ç½²æ­¥éª¤)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
- [æ•°æ®æŸ¥çœ‹](#æ•°æ®æŸ¥çœ‹)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ç³»ç»Ÿæ¶æ„

### ğŸ”„ å·¥ä½œæµç¨‹

```
ç”¨æˆ·æäº¤æµ‹è¯•
    â†“
å‰ç«¯æ”¶é›†æ•°æ®
    â†“
è°ƒç”¨GitHub API (repository_dispatch)
    â†“
è§¦å‘GitHub Actionså·¥ä½œæµ
    â†“
ä¿å­˜æ•°æ®åˆ°data/raw/ç›®å½•
    â†“
æ›´æ–°æ±‡æ€»ç»Ÿè®¡
    â†“
æäº¤åˆ°ä»“åº“
    â†“
æ¯å¤©å‡Œæ™¨2ç‚¹è‡ªåŠ¨ç”ŸæˆæŠ¥è¡¨å’ŒExcel
```

### ğŸ“‚ ç›®å½•ç»“æ„

```
AIè‡ªæµ‹è¡¨/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ collect-data.yml      # æ•°æ®æ”¶é›†å·¥ä½œæµ
â”‚       â””â”€â”€ daily-report.yml      # æ¯æ—¥æŠ¥è¡¨å·¥ä½œæµ
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ raw/                      # åŸå§‹æµ‹è¯•æ•°æ®ï¼ˆJSONï¼‰
â”‚   â”œâ”€â”€ reports/                  # æ¯æ—¥æŠ¥è¡¨å’ŒExcel
â”‚   â”‚   â””â”€â”€ charts/              # å¯è§†åŒ–å›¾è¡¨
â”‚   â””â”€â”€ summary.json             # æ±‡æ€»ç»Ÿè®¡
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ update_summary.py        # æ›´æ–°æ±‡æ€»ç»Ÿè®¡
â”‚   â”œâ”€â”€ generate_daily_report.py # ç”Ÿæˆæ¯æ—¥æŠ¥è¡¨
â”‚   â”œâ”€â”€ export_to_excel.py       # å¯¼å‡ºExcel
â”‚   â””â”€â”€ cleanup_old_data.py      # æ¸…ç†æ—§æ•°æ®
â”œâ”€â”€ github-data-collector.js     # å‰ç«¯æ•°æ®æ”¶é›†æ¨¡å—
â”œâ”€â”€ consent-modal.js             # ç”¨æˆ·åŒæ„å¼¹çª—
â”œâ”€â”€ app.js                        # ä¸»åº”ç”¨é€»è¾‘
â””â”€â”€ AIè‡ªæµ‹è¡¨.html                # ä¸»é¡µé¢
```

---

## å‰ç½®å‡†å¤‡

### 1. GitHubä»“åº“è®¾ç½®

**é€‰æ‹©ä»“åº“ç±»å‹**ï¼š
- âœ… **æ¨èï¼šç§æœ‰ä»“åº“** - æ•°æ®å®Œå…¨ä¿å¯†ï¼Œåªæœ‰æ‚¨èƒ½è®¿é—®
- âš ï¸ å…¬å¼€ä»“åº“ - ä»»ä½•äººéƒ½èƒ½çœ‹åˆ°æµ‹è¯•æ•°æ®ï¼ˆä¸æ¨èï¼‰

### 2. GitHub Pagesé…ç½®

å³ä½¿æ˜¯ç§æœ‰ä»“åº“ï¼Œä¹Ÿå¯ä»¥è®©ç½‘ç«™å…¬å¼€è®¿é—®ï¼š

1. è¿›å…¥ä»“åº“ **Settings** â†’ **Pages**
2. **Source**: é€‰æ‹© `main` åˆ†æ”¯
3. **Folder**: é€‰æ‹© `/ (root)`
4. ç‚¹å‡» **Save**
5. å‡ åˆ†é’Ÿåï¼Œç½‘ç«™å°†åœ¨ `https://yourusername.github.io/repo-name` ä¸Šçº¿

**ç»“æœ**ï¼š
- âœ… ç½‘ç«™å…¬å¼€ï¼ˆä»»ä½•äººå¯è®¿é—®ï¼‰
- âœ… æ•°æ®ç§æœ‰ï¼ˆåªæœ‰æ‚¨èƒ½çœ‹åˆ°ä»“åº“å†…å®¹ï¼‰
- âœ… æœ€ä½³æ–¹æ¡ˆï¼

### 3. åˆ›å»ºPersonal Access Token

**GitHub APIéœ€è¦tokenæ¥è§¦å‘å·¥ä½œæµ**ï¼š

1. è®¿é—® [GitHub Settings â†’ Developer settings â†’ Personal access tokens â†’ Tokens (classic)](https://github.com/settings/tokens)
2. ç‚¹å‡» **Generate new token (classic)**
3. **Note**: å¡«å†™ `AI Test Data Collection`
4. **Expiration**: é€‰æ‹© `No expiration`ï¼ˆæˆ–è‡ªå®šä¹‰ï¼‰
5. **Scopes**: å‹¾é€‰ä»¥ä¸‹æƒé™
   - âœ… `repo` (å®Œæ•´ä»“åº“æƒé™)
   - âœ… `workflow` (å·¥ä½œæµæƒé™)
6. ç‚¹å‡» **Generate token**
7. ğŸ“‹ **ç«‹å³å¤åˆ¶token**ï¼ˆåªæ˜¾ç¤ºä¸€æ¬¡ï¼ï¼‰

**ä¿å­˜token**ï¼š
```
ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

âš ï¸ **é‡è¦**ï¼štokenç­‰åŒäºå¯†ç ï¼Œä¸è¦æ³„éœ²ï¼

---

## éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤1: ä¸Šä¼ ä»£ç åˆ°GitHub

```bash
# 1. åˆå§‹åŒ–Gitä»“åº“ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
cd "e:\å¤šå¹³å°è‡ªåª’ä½“\AIè‡ªæµ‹è¡¨"
git init

# 2. æ·»åŠ æ‰€æœ‰æ–‡ä»¶
git add .

# 3. æäº¤
git commit -m "ğŸ‰ åˆå§‹æäº¤ï¼šGitHub Actionsæ•°æ®æ”¶é›†ç³»ç»Ÿ"

# 4. æ·»åŠ è¿œç¨‹ä»“åº“ï¼ˆæ›¿æ¢ä¸ºæ‚¨çš„ä»“åº“åœ°å€ï¼‰
git remote add origin https://github.com/YOUR_USERNAME/YOUR_REPO.git

# 5. æ¨é€åˆ°GitHub
git push -u origin main
```

### æ­¥éª¤2: é…ç½®å‰ç«¯GitHubä¿¡æ¯

ç¼–è¾‘ `github-data-collector.js` æ–‡ä»¶ï¼ˆç¬¬8-12è¡Œï¼‰ï¼š

```javascript
this.config = {
  owner: 'YOUR_GITHUB_USERNAME',  // â† æ›¿æ¢ä¸ºæ‚¨çš„GitHubç”¨æˆ·å
  repo: 'YOUR_REPO_NAME',         // â† æ›¿æ¢ä¸ºä»“åº“å
  token: 'ghp_xxxxxxxxxx'         // â† ç²˜è´´æ‚¨çš„Personal Access Token
};
```

**ç¤ºä¾‹**ï¼š
```javascript
this.config = {
  owner: 'zhangsan',              // ç”¨æˆ·å
  repo: 'ai-test',                // ä»“åº“å
  token: 'ghp_abc123...'          // token
};
```

### æ­¥éª¤3: æäº¤é…ç½®

```bash
git add github-data-collector.js
git commit -m "ğŸ”§ é…ç½®GitHub APIè¿æ¥"
git push
```

### æ­¥éª¤4: å¯ç”¨GitHub Actions

1. è®¿é—®ä»“åº“é¡µé¢
2. ç‚¹å‡»é¡¶éƒ¨ **Actions** æ ‡ç­¾
3. å¦‚æœçœ‹åˆ°æç¤º"Workflows aren't being run on this repository"
4. ç‚¹å‡»ç»¿è‰²æŒ‰é’® **I understand my workflows, go ahead and enable them**

---

## é…ç½®è¯´æ˜

### GitHub Actionså…è´¹é¢åº¦

```yaml
å…è´¹è®¡åˆ’ (Free):
  - å­˜å‚¨: 500 MB
  - æ‰§è¡Œæ—¶é—´: 2000 åˆ†é’Ÿ/æœˆ
  - å¹¶å‘ä»»åŠ¡: 20 ä¸ª

å®é™…ä½¿ç”¨é‡ä¼°ç®—:
  æ¯æ¬¡æ•°æ®æäº¤:
    - æ‰§è¡Œæ—¶é—´: ~30 ç§’
    - å­˜å‚¨: ~2 KB
  æ¯å¤©100ä¸ªç”¨æˆ·:
    - æ‰§è¡Œæ—¶é—´: 50 åˆ†é’Ÿ/æœˆ (<< 2000é™é¢)
    - å­˜å‚¨: 6 MB/æœˆ (<< 500MBé™é¢)

ç»“è®º: å…è´¹é¢åº¦å®Œå…¨å¤Ÿç”¨ï¼
```

### æ•°æ®éšç§å’Œå®‰å…¨

```yaml
æ•°æ®ä¿æŠ¤:
  âœ… ä»“åº“ç§æœ‰ â†’ åªæœ‰æ‚¨èƒ½è®¿é—®æ•°æ®
  âœ… Tokenæƒé™ â†’ åªèƒ½å†™å…¥ï¼Œæ— æ³•è¯»å–
  âœ… åŒ¿åID â†’ æ— æ³•è¿½è¸ªåˆ°å…·ä½“ç”¨æˆ·
  âœ… æœ¬åœ°å¤‡ä»½ â†’ ç½‘ç»œæ•…éšœæ—¶æ•°æ®ä¸ä¸¢å¤±

æ•°æ®æ”¶é›†:
  âœ… æµ‹è¯•ç­”æ¡ˆå’Œå¾—åˆ†
  âœ… è®¾å¤‡ç±»å‹å’Œæµè§ˆå™¨
  âœ… å®Œæˆæ—¶é•¿å’Œæ—¶é—´æˆ³
  âŒ ä¸æ”¶é›†IPåœ°å€
  âŒ ä¸æ”¶é›†ä¸ªäººä¿¡æ¯
  âŒ ä¸æ”¶é›†Cookie
```

---

## ä½¿ç”¨æŒ‡å—

### è‡ªåŠ¨è¿è¡Œï¼ˆæ— éœ€å¹²é¢„ï¼‰

**æ•°æ®æ”¶é›†**ï¼š
- ç”¨æˆ·å®Œæˆæµ‹è¯• â†’ è‡ªåŠ¨æäº¤åˆ°GitHub
- å“åº”æ—¶é—´ï¼š10-30ç§’
- ç”¨æˆ·æ— æ„ŸçŸ¥ï¼ˆå¼‚æ­¥æäº¤ï¼‰

**æ¯æ—¥æŠ¥è¡¨**ï¼š
- æ¯å¤©å‡Œæ™¨2ç‚¹ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰è‡ªåŠ¨è¿è¡Œ
- ç”ŸæˆJSONæŠ¥è¡¨ã€Excelæ–‡ä»¶ã€å¯è§†åŒ–å›¾è¡¨
- è‡ªåŠ¨æäº¤åˆ°ä»“åº“

### æ‰‹åŠ¨è§¦å‘

**æ‰‹åŠ¨ç”ŸæˆæŠ¥è¡¨**ï¼š
1. è®¿é—®ä»“åº“ **Actions** æ ‡ç­¾
2. ç‚¹å‡»å·¦ä¾§ `æ¯æ—¥æ•°æ®æŠ¥è¡¨`
3. ç‚¹å‡»å³ä¾§ `Run workflow` â†’ `Run workflow`

**æ‰‹åŠ¨æµ‹è¯•æ•°æ®æäº¤**ï¼š
è®¿é—®æµ‹è¯•é¡µé¢ï¼Œå®Œæˆæµ‹è¯•åæŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰ï¼š
- âœ… `âœ… æ•°æ®å·²æˆåŠŸæäº¤åˆ°GitHub` â†’ æˆåŠŸ
- ğŸ’¾ `ğŸ’¾ æ•°æ®å·²ä¿å­˜åˆ°æœ¬åœ°å¤‡ä»½` â†’ ç½‘ç»œå¤±è´¥ï¼Œå·²å¤‡ä»½
- âŒ `âŒ æ•°æ®æäº¤å¼‚å¸¸` â†’ æ£€æŸ¥tokené…ç½®

---

## æ•°æ®æŸ¥çœ‹

### æŸ¥çœ‹åŸå§‹æ•°æ®

1. è®¿é—®ä»“åº“ `data/raw/` ç›®å½•
2. æ¯ä¸ªJSONæ–‡ä»¶æ˜¯ä¸€æ¡æµ‹è¯•è®°å½•
3. æ–‡ä»¶åæ ¼å¼ï¼š`test_20250113_120530_abc123.json`
   - `20250113_120530` = 2025å¹´1æœˆ13æ—¥ 12:05:30
   - `abc123` = åŒ¿åIDå‰6ä½

**JSONæ•°æ®ç»“æ„**ï¼š
```json
{
  "timestamp": "2025-01-13T12:05:30.123Z",
  "anonymousId": "abc12345-6789-...",
  "answers": {
    "TB": [4, 5, 3],
    "LS": [3, 4, 4],
    ...
  },
  "dimensionScores": {
    "TB": 75,
    "LS": 68.75,
    ...
  },
  "result": {
    "mainRoute": "T4",
    "subRoute": "T2",
    "isDirect": false
  },
  "metadata": {
    "deviceType": "desktop",
    "screenResolution": "1920x1080",
    "language": "zh-CN",
    ...
  }
}
```

### æŸ¥çœ‹æ±‡æ€»ç»Ÿè®¡

è®¿é—® `data/summary.json`ï¼š
```json
{
  "total_tests": 156,
  "last_updated": "2025-01-13T14:30:00",
  "route_distribution": {
    "T4": 45,
    "T2": 38,
    "T1": 31,
    ...
  },
  "dimension_averages": {
    "TB": 67.5,
    "LS": 72.3,
    ...
  },
  "daily_counts": {
    "2025-01-10": 12,
    "2025-01-11": 18,
    "2025-01-12": 25,
    "2025-01-13": 15
  }
}
```

### æŸ¥çœ‹ExcelæŠ¥è¡¨

1. è®¿é—® `data/reports/` ç›®å½•
2. ä¸‹è½½æœ€æ–°çš„ `å®Œæ•´æ•°æ®æŠ¥è¡¨_YYYYMMDD_HHMMSS.xlsx`
3. ExcelåŒ…å«4ä¸ªå·¥ä½œè¡¨ï¼š
   - **æ‰€æœ‰æµ‹è¯•æ•°æ®** - æ¯æ¡æµ‹è¯•çš„è¯¦ç»†è®°å½•
   - **è·¯çº¿åˆ†å¸ƒæ±‡æ€»** - å„è·¯çº¿ç»Ÿè®¡
   - **ç»´åº¦å¾—åˆ†æ±‡æ€»** - 8ç»´åº¦å¹³å‡åˆ†
   - **æ¯æ—¥ç»Ÿè®¡** - æ¯å¤©çš„æµ‹è¯•æ•°é‡å’Œåˆ†å¸ƒ

### æŸ¥çœ‹å¯è§†åŒ–å›¾è¡¨

è®¿é—® `data/reports/charts/` ç›®å½•ï¼š
- `routes_YYYYMMDD.png` - è·¯çº¿åˆ†å¸ƒé¥¼å›¾
- `daily_trend_YYYYMMDD.png` - æ¯æ—¥æµ‹è¯•è¶‹åŠ¿çº¿å›¾

---

## å¸¸è§é—®é¢˜

### Q1: æ•°æ®æäº¤å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**A**: ç³»ç»Ÿæœ‰è‡ªåŠ¨é™çº§æœºåˆ¶ï¼š
1. ä¼˜å…ˆæäº¤åˆ°GitHub
2. å¤±è´¥åˆ™ä¿å­˜åˆ°æµè§ˆå™¨localStorage
3. ç”¨æˆ·å¯æ‰‹åŠ¨å¯¼å‡ºå¤‡ä»½ï¼šåœ¨æµè§ˆå™¨æ§åˆ¶å°è¾“å…¥ï¼š
   ```javascript
   GitHubDataCollector.exportLocalBackup()
   ```

### Q2: GitHub Actionsæ‰§è¡Œå¤±è´¥ï¼Ÿ

**A**: æ£€æŸ¥ä»¥ä¸‹é¡¹ç›®ï¼š
1. **tokenæ˜¯å¦æ­£ç¡®**ï¼š
   - åœ¨ `github-data-collector.js` ä¸­æ£€æŸ¥token
   - tokenå¿…é¡»æœ‰ `repo` å’Œ `workflow` æƒé™
2. **Pythonä¾èµ–æ˜¯å¦å®‰è£…**ï¼š
   - å·¥ä½œæµä¼šè‡ªåŠ¨å®‰è£… `pandas openpyxl pytz`
   - å¦‚æœå¤±è´¥ï¼ŒæŸ¥çœ‹Actionsæ—¥å¿—
3. **æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®**ï¼š
   - ç¡®ä¿ `data/` å’Œ `scripts/` ç›®å½•å­˜åœ¨

### Q3: å¦‚ä½•æŸ¥çœ‹GitHub Actionsæ—¥å¿—ï¼Ÿ

**A**:
1. è®¿é—®ä»“åº“ **Actions** æ ‡ç­¾
2. ç‚¹å‡»ä»»æ„å·¥ä½œæµè¿è¡Œè®°å½•
3. å±•å¼€æ­¥éª¤æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
4. å¤±è´¥çš„æ­¥éª¤ä¼šæ ‡çº¢

### Q4: ç§æœ‰ä»“åº“åˆ«äººèƒ½è®¿é—®ç½‘ç«™å—ï¼Ÿ

**A**: èƒ½ï¼
- ä»“åº“ç§æœ‰ = ä»£ç å’Œæ•°æ®ç§æœ‰
- GitHub Pageså…¬å¼€ = ç½‘ç«™ä»»ä½•äººå¯è®¿é—®
- è¿™æ˜¯æœ€ä½³æ–¹æ¡ˆï¼

### Q5: tokenä¼šè¿‡æœŸå—ï¼Ÿ

**A**:
- å¦‚æœé€‰æ‹© `No expiration`ï¼Œæ°¸ä¸è¿‡æœŸ
- å¦‚æœé€‰æ‹©è‡ªå®šä¹‰æ—¶é—´ï¼Œåˆ°æœŸå‰ä¼šæ”¶åˆ°é‚®ä»¶æé†’
- è¿‡æœŸåé‡æ–°ç”Ÿæˆå¹¶æ›´æ–° `github-data-collector.js`

### Q6: æ•°æ®ä¼šä¸¢å¤±å—ï¼Ÿ

**A**: å¤šé‡ä¿éšœï¼š
- âœ… GitHubä»“åº“å¤‡ä»½ï¼ˆè‡ªåŠ¨ç‰ˆæœ¬æ§åˆ¶ï¼‰
- âœ… æœ¬åœ°localStorageå¤‡ä»½
- âœ… å¯æ‰‹åŠ¨å¯¼å‡ºJSON
- âœ… æ¯æ—¥è‡ªåŠ¨ç”ŸæˆExcelå‰¯æœ¬

### Q7: å¦‚ä½•åˆ é™¤ç‰¹å®šç”¨æˆ·çš„æ•°æ®ï¼Ÿ

**A**:
1. è®¿é—® `data/raw/` ç›®å½•
2. é€šè¿‡anonymousIdæœç´¢å¯¹åº”æ–‡ä»¶
3. åˆ é™¤æ–‡ä»¶å¹¶æäº¤ï¼š
   ```bash
   git rm data/raw/test_xxxxx.json
   git commit -m "åˆ é™¤ç”¨æˆ·æ•°æ®"
   git push
   ```

### Q8: å¦‚ä½•æµ‹è¯•ç³»ç»Ÿæ˜¯å¦æ­£å¸¸å·¥ä½œï¼Ÿ

**A**:
1. è®¿é—®æµ‹è¯•ç½‘ç«™
2. å®Œæˆä¸€æ¬¡æµ‹è¯•
3. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰æŸ¥çœ‹æ—¥å¿—
4. 5åˆ†é’Ÿåè®¿é—®ä»“åº“ `data/raw/` ç›®å½•
5. åº”è¯¥èƒ½çœ‹åˆ°æ–°çš„JSONæ–‡ä»¶

---

## ğŸ‰ å®Œæˆï¼

æ‚¨çš„GitHub Actionsæ•°æ®æ”¶é›†ç³»ç»Ÿå·²ç»éƒ¨ç½²å®Œæˆï¼

**ç³»ç»Ÿèƒ½åŠ›**ï¼š
- âœ… è‡ªåŠ¨æ”¶é›†æµ‹è¯•æ•°æ®ï¼ˆå®Œå…¨åŒ¿åï¼‰
- âœ… æ¯æ—¥è‡ªåŠ¨ç”ŸæˆExcelæŠ¥è¡¨
- âœ… å¯è§†åŒ–å›¾è¡¨å’Œè¶‹åŠ¿åˆ†æ
- âœ… å®Œå…¨åœ¨GitHubç”Ÿæ€å†…
- âœ… æ— ç¬¬ä¸‰æ–¹ä¾èµ–
- âœ… å…è´¹é¢åº¦å¤Ÿç”¨
- âœ… æ•°æ®å®Œå…¨ç§æœ‰

**ä¸‹ä¸€æ­¥**ï¼š
1. åˆ†äº«ç½‘ç«™é“¾æ¥ç»™ç”¨æˆ·
2. æ¯å¤©æŸ¥çœ‹æ•°æ®æŠ¥è¡¨
3. åˆ†æç”¨æˆ·å­¦ä¹ è·¯çº¿åå¥½
4. ä¼˜åŒ–æµ‹è¯•é¢˜ç›®å’Œè·¯çº¿æ¨è

å¦‚æœ‰ç–‘é—®ï¼Œè¯·æŸ¥çœ‹ï¼š
- ğŸ“š [GitHub Actionså®˜æ–¹æ–‡æ¡£](https://docs.github.com/actions)
- ğŸ’¬ [GitHubç¤¾åŒºè®¨è®º](https://github.com/community)

---

**æœ€åæ›´æ–°**ï¼š2025-01-13
**ä½œè€…**ï¼šåµ©è¯´AI Team
